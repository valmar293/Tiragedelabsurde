<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Tirage de cartes absurdes</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #fdf6e3;
      color: #333;
      padding: 2em;
    }
    button {
      padding: 0.5em 1em;
      font-size: 1.2em;
      background-color: #e0cfe3;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #carte {
      margin-top: 2em;
      padding: 1em;
      border: 2px dashed #ccc;
      background-color: #fff;
      border-radius: 10px;
    }
    h2 {
      color: #6a4c93;
    }
    strong {
      color: #444;
    }
  </style>
</head>
<body>

  <h1>Tire ta carte absurde</h1>
  <button onclick="tirerCarte()">Tirer une carte</button>
  <div id="carte">Aucune carte tirée pour l’instant.</div>

  <script>
    let cartes = [];

    // Charger les cartes depuis cartes.json
    fetch('cartes.json')
      .then(response => response.json())
      .then(data => {
        cartes = data.cartes;
      })
      .catch(error => {
        document.getElementById("carte").innerHTML = "Erreur de chargement des cartes.";
        console.error("Erreur JSON :", error);
      });

    function tirerCarte() {
      if (cartes.length === 0) {
        document.getElementById("carte").innerHTML = "Les cartes ne sont pas encore chargées.";
        return;
      }

      const carte = cartes[Math.floor(Math.random() * cartes.length)];
      afficherCarte(carte);
    }

    function afficherCarte(carte) {
      let contenu = `<h2>${carte.titre}</h2>`;

      if (carte.mission) {
        contenu += `<p><strong>Mission :</strong> ${carte.mission}</p>`;
      }
      if (carte.action) {
        contenu += `<p><strong>Action :</strong> ${carte.action}</p>`;
      }
      if (carte.effet) {
        contenu += `<p><strong>Effet :</strong> ${carte.effet}</p>`;
      }
      if (carte.rituel) {
        contenu += `<p><strong>Rituel :</strong> ${carte.rituel.replace(/\n/g, "<br>")}</p>`;
      }
      if (carte.recompense) {
        contenu += `<p><strong>Récompense :</strong> ${carte.recompense}</p>`;
      }
      if (carte.phrase || carte.phrase_a_dire) {
        const phrase = carte.phrase || carte.phrase_a_dire;
        contenu += `<p><strong>Phrase à dire :</strong> ${phrase}</p>`;
      }

      document.getElementById("carte").innerHTML = contenu;
    }
  </script>

</body>
</html>

